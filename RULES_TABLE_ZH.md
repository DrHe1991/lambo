## 平台经济与治理规则表（Spend & Earn 简化版 v3）

本文件定义平台内部"聪账本"（off-chain ledger）的经济规则。核心模型极其简单：

> **花钱发言，好内容赚回来。**
>
> 1. 每个公开行为（发帖、评论、点赞）都有一笔**花费**——钱直接进入奖励池，不退不锁。
> 2. 7 天后，奖励池按 **Discovery Score** 分配给优质内容——奖励洞见，不奖励粉丝量。
> 3. 垃圾内容被 challenge 删除——作者已经亏了花费，还额外扣信誉 + 罚款。
> 4. AI 不是终审——三层递进仲裁（AI → 陪审 → 委员会）。

---

## 0. 术语

- **sat（聪）**：平台统一结算单位（1 BTC = 100,000,000 sat）。支持 BTC/闪电/稳定币入金，入账统一记为 sat。
- **balance**：用户可用余额（数据库字段 `available_balance`）。所有花费从这里扣，所有收入加到这里。
- **pending_rewards**：已累计但未发放的奖励（T+7d 时结算到 balance）。
- **Challenge 窗口**：内容创建后 7 天内可发起 challenge。
- 没有"锁定余额"，没有"质押退回"——花出去的钱就是花出去了。

---

## 1. 动态费率与基础参数

### 1.1 垃圾压力指数 `SI`（Spam Index）

平台定期更新 `SI ∈ [0, 1]`，用于动态调整费用。信号来源：
- challenge 违规成立率、新账号发帖占比、重复内容率、负反馈率、异常聚类得分

### 1.2 动态倍率 `M(SI)`

- `M = 1 + 3×SI`（正常 M=1，垃圾攻击期 M=4）

### 1.3 信誉折扣 `K(trust)`

- `K = clamp(1.4 - TrustScore/1250, 0.6, 1.4)`
  - 高信誉 → 费用最低 0.6×
  - 低信誉 → 费用最高 1.4×

### 1.4 基础费用表

> 实际费用 = `base × M(SI) × K(TrustScore)`

**行为花费**（直接进入奖励池，不退）：

| 行为 | 代号 | 基础花费 |
| --- | --- | --- |
| 发帖 `note` | `C_post` | **200 sat** |
| 发提问 `question` | `C_question` | **300 sat** |
| 回答 `answer` | `C_answer` | **200 sat** |
| 评论 `comment` | `C_comment` | **50 sat** |
| 回复（对评论的回复） | `C_reply` | **20 sat** |
| 点赞帖子 | `C_like` | **10 sat** |
| 点赞评论 | `C_comment_like` | **5 sat** |

**Challenge 费用**（见第 5 节）：

| 层级 | 代号 | 基础费用 |
| --- | --- | --- |
| Layer 1 AI 初审 | `F_L1` | **100 sat** |
| Layer 2 社区陪审 | `F_L2` | **500 sat** |
| Layer 3 委员会终审 | `F_L3` | **1500 sat** |

**奖励池参数**：

| 参数 | 默认值 | 说明 |
| --- | --- | --- |
| 平台每日排放 | `300 × DAU` sat/day | Phase 1 主要补贴来源 |
| 作者分成 | 80% | 帖子奖励中作者获得的比例 |
| 评论池分成 | 20% | 帖子奖励中分给评论者的比例 |
| Boost 注入奖励池 | 30% | Boost 收入反哺创作者 |

---

## 2. 信誉系统

### 2.1 四维子分（0–1000）

| 维度 | 说明 |
| --- | --- |
| `CreatorScore` | 内容生产质量 |
| `CuratorScore` | 点赞/投票判断力 |
| `JurorScore` | 陪审准确性 |
| `RiskScore` | 账户风险（越高越危险） |

**新用户初始值**：Creator=500, Curator=500, Juror=500, Risk=0 → TrustScore ≈ 550

**综合信任分**：

```
TrustScore = 0.30×Creator + 0.25×Curator + 0.25×Juror + 0.20×(1000 - Risk)
```

### 2.2 信誉变化

| 事件 | 影响 |
| --- | --- |
| 帖子 7d 结算无违规 | `Creator +2 ~ +5` |
| 帖子 Discovery Score 进 Top 10% | `Creator +5 ~ +15` |
| 内容被 challenge 违规成立 | `Creator -20 ~ -80` |
| 内容被 challenge 但最终不违规 | `Creator +3 ~ +10` |
| 你点赞的内容被判违规 | `Curator -1 ~ -5` |
| 你点赞的内容获得奖励 | `Curator +0.5 ~ +2` |
| 你的评论进帖子 Top 3 | `Curator +2 ~ +5` |
| 陪审投票与最终裁决一致 | `Juror +3 ~ +10` |
| 陪审投票与裁决相反 | `Juror -3 ~ -10` |
| 陪审缺席 | `Juror -20` |
| 上层推翻你所在的下层多数 | `Juror -15 ~ -50` |
| 异常资金行为 | `Risk +10 ~ +200` |

### 2.3 TrustScore 视觉等级

| 档位 | 分数范围 | 颜色 | UI |
| --- | --- | --- | --- |
| White | 0–390 | 白色 | 头像白环 |
| Green | 400–590 | 绿色 | 头像绿环 |
| Blue | 600–740 | 蓝色 | 头像蓝环 |
| Purple | 750–890 | 紫色 | 头像紫环 |
| Orange | 900–1000 | 橙色 | 头像橙环 + 卡片高亮 |

---

## 3. 行为规则表（Spend & Earn）

### 3.1 注册与钱包

| 行为 | 花费 | 结果 |
| --- | --- | --- |
| 注册 | 0 | **0 sat** 初始余额 + **1 次免费公开发帖** |
| 绑定钱包 | 0 | 绑定提币地址 |
| 入金 | 网络费 | 记账到 balance |

> **无注册赠金、无每日登录奖励。** 新用户唯一的"免费体验"是 1 次免费公开发帖——用来感受平台，发完后需入金或从奖励中赚取 sat 才能继续。

### 3.2 发帖 / 提问 / 回答 / 评论

> 核心逻辑：**花钱发布 → 7天后按 Discovery Score 分钱**。没有锁定、没有退回。

| 行为 | 花费（进入奖励池） | 7d 后结算 | 被 challenge 违规 |
| --- | --- | --- | --- |
| 发帖 `note` | `C_post` (200 sat) | 按 Discovery Score 从池中获得奖励 | 内容删除 + 额外罚款 + 信誉下降 |
| 提问 `question` | `C_question` (300 sat) | 按 Discovery Score + 可选赏金 | 同上 |
| 回答 `answer` | `C_answer` (200 sat) | 按 Discovery Score + 可获赏金 | 同上 |
| 评论 `comment` | `C_comment` (50 sat) | 分享父帖 20% 奖励 | 内容删除 + 信誉下降 |
| 回复 | `C_reply` (20 sat) | 不参与奖励分配（Phase 1） | 可被 challenge |

**违规额外罚款**：内容被 challenge 成功时，除了已花费的钱打水漂，还从 balance 额外扣除 `C_action × P`（`P = 0.5 ~ 2.0`，按严重度）。余额不足 → RiskScore 上升。

> **为什么不退钱？** 退钱 = 质押 = 需要锁定/解锁/冻结状态机。不退钱意味着：
> - 数据库只需一个 `balance` 字段，无需 `locked_balance`
> - 无需定时任务在 24h 后解锁
> - 无需处理"质押已退回但后来被 challenge"的边界情况
> - 心智模型清晰：发一条帖子 = 花 200 sat 买一张"7天彩票"

### 3.3 点赞（有成本的策展）

| 行为 | 花费 | 正向结果 | 负向结果 |
| --- | --- | --- | --- |
| 点赞帖子 | `C_like` (10 sat) | `CuratorScore` 上升；你的赞为帖子贡献 Discovery Score | 内容违规 → `CuratorScore` 下降 |
| 点赞评论 | `C_comment_like` (5 sat) | 提升评论排名 | 同上 |

> 10 sat 很便宜，但对刷赞机器人来说 10,000 个赞 = 100,000 sat，且低信誉号的赞几乎不影响 Discovery Score（权重 0.5）。

### 3.4 Follow / Unfollow

| 行为 | 花费 | 结果 |
| --- | --- | --- |
| follow / unfollow | 0 | 改变社交关系，影响 Discovery Score 中的 S_source 权重 |

### 3.5 Chat

| 行为 | 花费 | 结果 |
| --- | --- | --- |
| 私聊消息 | 0 | 即时送达 |
| 群聊消息 | 0 | 群内可见 |

> Chat 不走经济机制。反垃圾策略：非互关私信频率限制（每日 10 条）；RiskScore 高的用户自动降低上限；举报走平台审核，不进多层仲裁。

### 3.6 提现风控

| 条件 | 单日额度 | 延迟 |
| --- | --- | --- |
| 新账号(<7天) 或 RiskScore 高 | 50k sat | 24–72h |
| TrustScore 中等 (400–700) | 300k sat | 6–24h |
| TrustScore 高 (>700) | 2M sat | 0–6h |

---

## 4. 公共奖励池（Reward Pool）

> **核心原则**：奖励**真正的洞见**（破圈触达陌生人的内容），不奖励**粉丝基数**。

### 4.1 奖励池资金来源

| 来源 | 说明 |
| --- | --- |
| **所有行为花费** | C_post + C_comment + C_like + ... 全部注入 |
| **平台每日排放** | `300 × DAU` sat/day（Phase 1 补贴） |
| **违规罚款** | 违规额外罚款的 100% |
| **Boost 收入** | 30% 注入池 |

**Phase 1 算例**（200 DAU）：

| 来源 | 日均估算 |
| --- | --- |
| 行为花费（50帖 + 200评论 + 500赞） | 10,000 + 10,000 + 5,000 = **25,000 sat** |
| 平台排放 | 300 × 200 = **60,000 sat** |
| 违规罚款（估） | **3,000 sat** |
| **日均奖励池** | **≈ 88,000 sat** |

> 对比旧版（质押模型）：旧版奖励池约 102,000 sat/day，但需要复杂的锁定/解锁逻辑。新版 88,000 sat/day，工程复杂度降低 70%。

### 4.2 Discovery Score

每个点赞对帖子的 Discovery Score 贡献：

```
like_weight = W_trust(liker) × N_novelty(liker, author) × S_source(liker, author)

post_discovery_score = Σ like_weight
```

#### W_trust — 信誉权重

| 点赞者 TrustScore | W_trust |
|:---:|:---:|
| 0–399 (White) | 0.5 |
| 400–599 (Green) | 1.0 |
| 600–749 (Blue) | 2.0 |
| 750–899 (Purple) | 3.5 |
| 900–1000 (Orange) | 6.0 |

#### N_novelty — 新鲜度衰减

| 过去 30 天交互次数 | N_novelty |
|:---:|:---:|
| 0（首次） | **1.00** |
| 1–3 次 | 0.60 |
| 4–10 次 | 0.30 |
| 11–30 次 | 0.12 |
| 30+ 次 | 0.05 |

> 这是机制的灵魂：你的内容只在小圈子传播 → Discovery Score 低；触达陌生人 → 每个赞都是高价值信号。

#### S_source — 来源因子

| 关系 | S_source |
|:---:|:---:|
| 陌生人 | **1.00** |
| 粉丝 | **0.15** |

### 4.3 组合效果

| 场景 | W | N | S | Discovery Weight |
| --- |:---:|:---:|:---:|:---:|
| Orange 陌生人首次 | 6.0 | 1.00 | 1.00 | **6.000** |
| Blue 陌生人首次 | 2.0 | 1.00 | 1.00 | **2.000** |
| Green 交互过 2 次 | 1.0 | 0.60 | 1.00 | **0.600** |
| Orange 粉丝交互 20 次 | 6.0 | 0.12 | 0.15 | **0.108** |
| White 粉丝交互 50 次 | 0.5 | 0.05 | 0.15 | **0.004** |

> 1 个 Orange 陌生人首赞 = 1500 个 White 粉丝老用户的赞。

### 4.4 奖励分配

每日结算所有到达 T+7d 的帖子：

```
post_reward = (post_discovery_score / total_scores) × daily_pool
```

| 接收方 | 比例 |
| --- |:---:|
| 帖子作者 | 80% |
| 评论奖励池 | 20% |

> 若无被点赞的评论 → 作者获 100%。

### 4.5 评论奖励

评论也用 Discovery Score 排序（基于 `C_comment_like` = 5 sat 的点赞）：

```
comment_reward = (comment_score / total_comment_scores) × (post_reward × 20%)
```

回复（对评论的回复）：花费 20 sat，不参与奖励分配（Phase 1），可被 challenge。

### 4.6 完整算例

#### 200 DAU，日奖励池 = 88,000 sat，120 帖结算，总 Score = 600

**帖子 A**：新用户深度分析，28 赞

| 来源 | 数量 | 单权重 | 小计 |
| --- |:---:|:---:|:---:|
| Orange 陌生人首次 | 3 | 6.000 | 18.000 |
| Blue 陌生人首次 | 8 | 2.000 | 16.000 |
| Green 交互 1 次 | 12 | 0.600 | 7.200 |
| White 陌生人首次 | 5 | 0.500 | 2.500 |
| **总 Score** | **28** | | **43.700** |

```
帖子 A 奖励 = (43.7/600) × 88,000 = 6,409 sat
├── 作者：80% = 5,127 sat
└── 评论池：20% = 1,282 sat
```

**作者回报**：花了 200 sat → 赚 5,127 sat → **净赚 4,927 sat（25.6× 回报）** 🔥

---

**帖子 B**：KOL 日常感想，285 赞（多为粉丝）

| 来源 | 数量 | 单权重 | 小计 |
| --- |:---:|:---:|:---:|
| Purple 粉丝交互 20+ 次 | 80 | 0.063 | 5.040 |
| Green 粉丝交互 10+ 次 | 200 | 0.018 | 3.600 |
| Blue 陌生人首次 | 5 | 2.000 | 10.000 |
| **总 Score** | **285** | | **18.640** |

```
帖子 B 奖励 = (18.64/600) × 88,000 = 2,734 sat
├── 作者：80% = 2,187 sat
```

**对比**：A 只有 28 赞得 5,127 sat；B 有 285 赞只得 2,187 sat。**奖励洞见，不奖励粉丝量。**

---

**帖子 C**：零互动

```
花了 200 sat，奖励 0 sat。净亏 200 sat。
```

> 这是"Spend & Earn"与"Staking"的核心区别——零互动帖子在旧模型下不赚不亏（质押退回），新模型下亏 200 sat。这**更强力地抑制低质量灌水**：你不确定自己要发什么 → 别发，省下 200 sat。

---

**帖子 D**：垃圾帖，被 challenge 成功

```
已花费：200 sat（进了池子）
额外罚款：200 × 1.5 = 300 sat（从 balance 扣除）
总损失：500 sat + 信誉下降
```

---

## 5. Challenge 三层仲裁

> 1. AI 不是终审——任何人不服可升级。
> 2. 逐级升本——小事小成本，大事大投入。
> 3. 信誉折扣——高信誉用户升级更便宜。

### 5.1 三层递进

```
Layer 1: AI 初审    →  接受 → 结案
  │ 不服 (花钱升级)
Layer 2: 社区陪审    →  接受 → 结案
  │ 不服 (花钱升级)
Layer 3: 委员会终审  →  结案（不可上诉）
```

所有费用乘以 `K(TrustScore)`。

### 5.2 Layer 1: AI 初审

| 项目 | 说明 |
| --- | --- |
| 触发 | 任何用户对公开内容发起 challenge |
| 费用 | `F_L1 = 100 × K(trust)` sat |
| 处理 | 秒级 ~ 分钟级 |
| 裁决 | AI 判 `GUILTY` 或 `NOT_GUILTY` |
| 升级 | 任一方 24h 内可升级到 Layer 2 |

| 挑战者 TrustScore | K | 实际费用 |
|:---:|:---:|:---:|
| 900 (Orange) | 0.68 | **68 sat** |
| 550 (新用户) | 0.96 | **96 sat** |
| 200 (低信誉) | 1.24 | **124 sat** |

### 5.3 Layer 2: 社区陪审

| 项目 | 说明 |
| --- | --- |
| 触发 | 任一方不服 L1，支付升级费 |
| 费用 | `F_L2 = 500 × K(trust)` sat |
| 处理 | Commit 2h + Reveal 4h = 6h |
| 陪审规模 | 轻案 9 人，重案 15 人 |
| 升级 | 任一方 24h 内可升级到 Layer 3 |

**陪审池资格**：TrustScore ≥ 600，账龄 ≥ 14 天，近 30 天 ≥ 3 次投票，与当事人无强关联。

**投票**：commit–reveal 机制，权重 `w = sqrt(TrustScore)`，违规阈值 60%。

**缺席惩罚**：JurorScore -10 ~ -20。

| 升级方 TrustScore | K | 实际费用 |
|:---:|:---:|:---:|
| 900 (Orange) | 0.68 | **340 sat** |
| 550 (新用户) | 0.96 | **480 sat** |
| 200 (低信誉) | 1.24 | **620 sat** |

### 5.4 Layer 3: 委员会终审

| 项目 | 说明 |
| --- | --- |
| 触发 | 任一方不服 L2，支付升级费 |
| 费用 | `F_L3 = 1500 × K(trust)` sat |
| 处理 | 24–72h |
| 委员会 | 5 名高信誉成员（TrustScore ≥ 850） |
| 推翻 L2 需要 | 70% 加权共识 |

| 升级方 TrustScore | K | 实际费用 |
|:---:|:---:|:---:|
| 900 (Orange) | 0.68 | **1,020 sat** |
| 550 (新用户) | 0.96 | **1,440 sat** |
| 200 (低信誉) | 1.24 | **1,860 sat** |

### 5.5 累计最大成本

| 层级 | Trust=900 | Trust=550 | Trust=200 |
| --- |:---:|:---:|:---:|
| L1 only | 68 | 96 | 124 |
| + L2 | 408 | 576 | 744 |
| + L3 | 1,428 | 2,016 | 2,604 |

### 5.6 结算

#### A) 违规成立 → 内容删除

| 角色 | 结果 |
| --- | --- |
| **作者** | 已花的 C_action 打水漂 + 额外罚款 `C_action × P` 从 balance 扣除 + 信誉下降 + 待发放奖励取消 |
| **挑战者（胜诉）** | 退还 challenge 费用 + 奖励（罚款的 35%） |
| **陪审多数（正确方）** | 分享罚款的 25% |
| **奖励池** | 获得罚款的 40% |
| **点赞者** | `CuratorScore` 下降 |

> 点赞者在 Spend & Earn 模型下不再被"连坐罚款"——他们已经花了 10 sat，这就是全部成本。连坐罚款增加了复杂度但收益很小。信誉惩罚（CuratorScore 下降 → 费用上升）已经足够。

#### B) 不违规 → 内容保留

| 角色 | 结果 |
| --- | --- |
| **作者** | 奖励正常发放 + 获得败诉方费用的 20% |
| **败诉挑战者** | 费用全部损失 |
| **陪审多数（正确方）** | 分享败诉方费用的 30% |
| **平台/池** | 获得败诉方费用的 50% |

#### C) 上层推翻下层

- 被推翻层的多数陪审：`JurorScore -15 ~ -50`
- 胜诉升级方：退还该层费用
- 败诉升级方：费用全部损失

### 5.7 Phase 路径

| Phase | 层级 | 说明 |
| --- | --- | --- |
| Phase 1 | L1 (AI) + 简化 L2（5 人） | AI 处理 90%，少数争议升级 |
| Phase 2 | L1 + 完整 L2（9–15 人） | 社区规模支撑 |
| Phase 3 | 三层全部 | 委员会上线 |

---

## 6. Boost / 广告

任何帖子可设为推广内容（`is_ad = true`），仍遵守内容政策。

**Boost 购买**：
- `budget_sat`：总预算（不可退）
- 每 100 sat ≈ 1,000 次额外 Feed 展示
- Boost **不影响** Discovery Score（防止花钱买奖励）

**收入分配**：平台 70%，奖励池 30%。

---

## 7. 内容政策

可操作的违规条款：
- 垃圾广告/引流（重复、批量、低信息密度）
- 诈骗/冒充/钓鱼
- 恶意软件
- 仇恨/暴力/未成年人违法内容
- 恶意骚扰/人身攻击

严重度分级：诈骗/钓鱼 = 重案（陪审 15 人，罚款更高）；模板广告 = 轻案。

---

## 8. MVP 实现清单

### P0：核心经济循环
- sat 账本：`available_balance` + 流水记录（一个字段，无 locked）
- 行为花费：发帖/评论/点赞 → 扣 balance → 记入奖励池
- 奖励结算：T+7d → Discovery Score 计算 → 分配到 balance
- 信誉系统：TrustScore 0–1000 + UI 颜色

### P1：社交与通讯
- Feed / Following / 发布 / Chat / 我的
- Follow/Unfollow（影响 S_source）
- Chat 私聊/群聊 + 频率限制
- 每日登录奖励

### P2：治理
- Layer 1 Challenge：AI 初审 + 费用结算
- Layer 2 Challenge：简化陪审（5 人）
- 违规罚款 → 池注入

### P3：商业化
- Boost 广告系统
- 提现分层限额 + 风控
- 冷启动 AI Agent 内容

---

## Appendix: Spend & Earn vs Staking 对比

| 维度 | Staking（旧版 v2） | Spend & Earn（v3） |
| --- | --- | --- |
| 心智模型 | "押金制"——押了还能拿回来 | "买彩票"——花了就花了，好内容赚回来 |
| 数据库 | `available_balance` + `locked_balance` | 只需 `available_balance` |
| 定时任务 | 24h 解锁、7d 结算、30d 延迟 challenge | 只需 7d 结算 |
| 零互动帖子 | 不赚不亏（质押退回） | **亏 200 sat**（更强抑制灌水） |
| 被 challenge 后 | 分"质押已退/未退"两种处理路径 | 统一：额外罚款从 balance 扣 |
| 点赞者连坐 | 扣除 10–50% 质押 | 无（省复杂度，CuratorScore 够用） |
| 工程复杂度 | 高（状态机 + 定时任务 + 边界情况） | **低（扣钱 + 7d 后加钱）** |
| 反垃圾效力 | 强 | **更强**（零互动就亏钱） |
